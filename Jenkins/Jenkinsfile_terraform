/* groovylint-disable DuplicateStringLiteral, LineLength */
pipeline {
    agent any
    stages {
        stage('Terraform init') {
            steps {
                echo 'Terraform init'
                sh '''cd ./terraform
                terraform init'''
            }
        }
        stage('Terraform format') {
            steps {
                echo 'Terraform format'
                sh '''cd ./terraform
                terraform fmt && terraform validate'''
            }
        }
        stage('Terraform Plan') {
            steps {
                echo 'Terraform plan'
                sh '''cd ./terraform
                terraform plan'''
            }
        }
        stage('Terraform apply') {
            steps {
                sh '''cd ./terraform
                terraform apply -auto-approve'''
            }
        }
    }
}
